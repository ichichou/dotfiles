title: "01. Apps"
rules:

# ──── Finder ────

# [Finder] Command-P を無効化
- description: "[Finder] Command-P → Invalid"
  manipulators:
  - type: basic
    from:
      key_code: p
      modifiers:
        mandatory:
        - command
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.apple\\.finder$"

# ──── Alacritty ────

# [Alacritty] Command-W を無効化
- description: "[Alacritty] Command-W → Invalid"
  manipulators:
  - type: basic
    from:
      key_code: w
      modifiers:
        mandatory:
        - command
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^org\\.alacritty$"

# [Alacritty] Command-Q 長押しでのみ Alacritty を終了
- description: "[Alacritty] LCommand-Q (held down) → Quit Alacritty"
  manipulators:
  - type: basic
    from:
      key_code: q
      modifiers:
        mandatory:
        - left_command
    to_if_held_down:
    - key_code: q
      modifiers:
      - command
      repeat: false
    parameters:
      basic.to_if_held_down_threshold_milliseconds: 500
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^org\\.alacritty$"

# ──── MacVim ────

# [MacVim] Command-W を無効化
- description: "[MacVim] Command-W → Invalid"
  manipulators:
  - type: basic
    from:
      key_code: w
      modifiers:
        mandatory:
        - command
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^org\\.vim\\.MacVim$"

# [MacVim] Command-Q 長押しでのみ Alacritty を終了
- description: "[MacVim] LCommand-Q (held down) → Quit MacVim"
  manipulators:
  - type: basic
    from:
      key_code: q
      modifiers:
        mandatory:
        - left_command
    to_if_held_down:
    - key_code: q
      modifiers:
      - command
      repeat: false
    parameters:
      basic.to_if_held_down_threshold_milliseconds: 500
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^org\\.vim\\.MacVim$"

# ──── Slack ────

# [Slack] RCommand-K 後に英語入力にする（LCommand-K → Up との競合回避）
- description: "[Slack] RCommand-K → Command-K, 英数"
  manipulators:
  - type: basic
    from:
      key_code: k
      modifiers:
        mandatory:
        - right_command
    to:
    - key_code: k
      modifiers:
      - command
    - key_code: japanese_eisuu
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.tinyspeck\\.slackmacgap$"

# ──── Superhuman ────

# [Superhuman] RCommand-K 後に英語入力にする（LCommand-K → Up との競合回避）
- description: "[Superhuman] RCommand-K → Command-K, 英数"
  manipulators:
  - type: basic
    from:
      key_code: k
      modifiers:
        mandatory:
        - right_command
    to:
    - key_code: k
      modifiers:
      - command
    - key_code: japanese_eisuu
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.superhuman\\.electron$"

# ──── Linear ────

# [Linear] RCommand-K 後に英語入力にする（LCommand-K → Up との競合回避）
- description: "[Linear] RCommand-K → Command-K, 英数"
  manipulators:
  - type: basic
    from:
      key_code: k
      modifiers:
        mandatory:
        - right_command
    to:
    - key_code: k
      modifiers:
      - command
    - key_code: japanese_eisuu
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.linear$"

# ──── Google Chrome ────

# [Chrome] スプレッドシートでの検索・置換
- description: "[Chrome] LShift-LCommand-F → Shift-Command-H"
  manipulators:
  - type: basic
    from:
      key_code: f
      modifiers:
        mandatory:
        - left_shift
        - left_command
    to:
    - key_code: h
      modifiers:
      - shift
      - command
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.google\\.Chrome$"

# [Chrome] Command-W のリピートを無効化
- description: "[Chrome] LCommand-W → Repeat: False"
  manipulators:
  - type: basic
    from:
      key_code: w
      modifiers:
        mandatory:
        - left_command
    to:
    - key_code: w
      modifiers:
      - command
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.google\\.Chrome$"

# [Chrome] Command-Q 長押しでのみ Chrome を終了
# - description: "[Chrome] LCommand-Q (held down) → Chrome を終了"
#   manipulators:
#   - type: basic
#     from:
#       key_code: q
#       modifiers:
#         mandatory:
#         - left_command
#     to_if_held_down:
#     - key_code: q
#       modifiers:
#       - command
#       repeat: false
#     parameters:
#       basic.to_if_held_down_threshold_milliseconds: 500
#     conditions:
#     - type: frontmost_application_if
#       bundle_identifiers:
#       - "^com\\.google\\.Chrome$"

# ──── Sidekick ────

# [Sidekick] スプレッドシートでの検索・置換
- description: "[Sidekick] LShift-LCommand-F → Shift-Command-H"
  manipulators:
  - type: basic
    from:
      key_code: f
      modifiers:
        mandatory:
        - left_shift
        - left_command
    to:
    - key_code: h
      modifiers:
      - shift
      - command
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.pushplaylabs\\.sidekick$"

# [Sidekick] Shift-Command-A でセッション一覧を開く（Sidekick でショートカット変更した上で）
- description: "[Sidekick] LShift-LCommand-A → Command-S"
  manipulators:
  - type: basic
    from:
      key_code: a
      modifiers:
        mandatory:
        - left_shift
        - left_command
    to:
    - key_code: s
      modifiers:
      - command
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.pushplaylabs\\.sidekick$"

# [Sidekick] Shift-Command-S で Sidecar を開く
- description: "[Sidekick] LShift-LCommand-S → Shift-Option-S"
  manipulators:
  - type: basic
    from:
      key_code: s
      modifiers:
        mandatory:
        - left_shift
        - left_command
    to:
    - key_code: s
      modifiers:
      - shift
      - option
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.pushplaylabs\\.sidekick$"

# ──── Microsoft Office ────

- description: "[Microsoft Office] Unix Keymaps"
  manipulators:

  # [Word] Control-H → Delete
  - type: basic
    from:
      key_code: h
      modifiers:
        mandatory:
        - control
    to:
    - key_code: delete_or_backspace
      repeat: true
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Word$"

  # [Excel] Control-H → Delete
  - type: basic
    from:
      key_code: h
      modifiers:
        mandatory:
        - control
    to:
    - key_code: delete_or_backspace
      repeat: true
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Excel$"

  # [Powerpoint] Control-H → Delete
  - type: basic
    from:
      key_code: h
      modifiers:
        mandatory:
        - control
    to:
    - key_code: delete_or_backspace
      repeat: true
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Powerpoint$"

  # [Word] Control-D → Fn-Delete
  - type: basic
    from:
      key_code: d
      modifiers:
        mandatory:
        - control
    to:
    - key_code: delete_forward
      repeat: true
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Word$"

  # [Excel] Control-D → Fn-Delete
  - type: basic
    from:
      key_code: d
      modifiers:
        mandatory:
        - control
    to:
    - key_code: delete_forward
      repeat: true
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Excel$"

  # [Powerpoint] Control-D → Fn-Delete
  - type: basic
    from:
      key_code: d
      modifiers:
        mandatory:
        - control
    to:
    - key_code: delete_forward
      repeat: true
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Powerpoint$"

  # [Word] Control-A → 行頭へ移動
  - type: basic
    from:
      key_code: a
      modifiers:
        mandatory:
        - control
    to:
    - key_code: home
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Word$"

  # [Excel] Control-A → 行頭へ移動
  - type: basic
    from:
      key_code: a
      modifiers:
        mandatory:
        - control
    to:
    - key_code: home
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Excel$"

  # [Powerpoint] Control-A → 行頭へ移動
  - type: basic
    from:
      key_code: a
      modifiers:
        mandatory:
        - control
    to:
    - key_code: home
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Powerpoint$"

  # [Word] Control-E → 行末へ移動
  - type: basic
    from:
      key_code: e
      modifiers:
        mandatory:
        - control
    to:
    - key_code: end
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Word$"

  # [Excel] Control-E → 行末へ移動
  - type: basic
    from:
      key_code: e
      modifiers:
        mandatory:
        - control
    to:
    - key_code: end
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Excel$"

  # [Powerpoint] Control-E → 行末へ移動
  - type: basic
    from:
      key_code: e
      modifiers:
        mandatory:
        - control
    to:
    - key_code: end
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Powerpoint$"

  # [Word] Control-K → 行末まで削除
  - type: basic
    from:
      key_code: k
      modifiers:
        mandatory:
        - control
    to:
    - key_code: end
      modifiers:
      - shift
      repeat: false
    - key_code: delete_or_backspace
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Word$"

  # [Excel] Control-K → 行末まで削除
  - type: basic
    from:
      key_code: k
      modifiers:
        mandatory:
        - control
    to:
    - key_code: end
      modifiers:
      - shift
      repeat: false
    - key_code: delete_or_backspace
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Excel$"

  # [Powerpoint] Control-K → 行末まで削除
  - type: basic
    from:
      key_code: k
      modifiers:
        mandatory:
        - control
    to:
    - key_code: end
      modifiers:
      - shift
      repeat: false
    - key_code: delete_or_backspace
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Powerpoint$"
