title: "01. Apps"
rules:

# ──── Finder ────

# [Finder] Command-P を無効化
- description: "[Finder] Command-P → Invalid"
  manipulators:
  - type: basic
    from:
      key_code: p
      modifiers:
        mandatory:
        - command
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.apple\\.finder$"

# ──── Alacritty ────

# [Alacritty] Command-W を無効化
- description: "[Alacritty] Command-W → Invalid"
  manipulators:
  - type: basic
    from:
      key_code: w
      modifiers:
        mandatory:
        - command
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^org\\.alacritty$"

# [Alacritty] LCommand-Q 長押しでのみ終了
- description: "[Alacritty] LCommand-Q (held down) → Quit Alacritty"
  manipulators:
  - type: basic
    from:
      key_code: q
      modifiers:
        mandatory:
        - left_command
    to_if_held_down:
    - key_code: q
      modifiers:
      - command
      repeat: false
    parameters:
      basic.to_if_held_down_threshold_milliseconds: 500
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^org\\.alacritty$"

# ──── MacVim ────

# [MacVim] Command-W を無効化
- description: "[MacVim] Command-W → Invalid"
  manipulators:
  - type: basic
    from:
      key_code: w
      modifiers:
        mandatory:
        - command
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^org\\.vim\\.MacVim$"

# [MacVim] LCommand-Q 長押しでのみ終了
- description: "[MacVim] LCommand-Q (held down) → Quit MacVim"
  manipulators:
  - type: basic
    from:
      key_code: q
      modifiers:
        mandatory:
        - left_command
    to_if_held_down:
    - key_code: q
      modifiers:
      - command
      repeat: false
    parameters:
      basic.to_if_held_down_threshold_milliseconds: 500
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^org\\.vim\\.MacVim$"

# ──── Slack ────

# [Slack] RCommand-K 後に英語入力にする（LCommand-K → Up との競合回避）
- description: "[Slack] RCommand-K → Command-K, 英数"
  manipulators:
  - type: basic
    from:
      key_code: k
      modifiers:
        mandatory:
        - right_command
    to:
    - key_code: k
      modifiers:
      - command
    - key_code: japanese_eisuu
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.tinyspeck\\.slackmacgap$"

# ──── Superhuman ────

# [Superhuman] RCommand-K 後に英語入力にする（LCommand-K → Up との競合回避）
- description: "[Superhuman] RCommand-K → Command-K, 英数"
  manipulators:
  - type: basic
    from:
      key_code: k
      modifiers:
        mandatory:
        - right_command
    to:
    - key_code: k
      modifiers:
      - command
    - key_code: japanese_eisuu
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.superhuman\\.electron$"

# ──── Linear ────

# [Linear] RCommand-K 後に英語入力にする（LCommand-K → Up との競合回避）
- description: "[Linear] RCommand-K → Command-K, 英数"
  manipulators:
  - type: basic
    from:
      key_code: k
      modifiers:
        mandatory:
        - right_command
    to:
    - key_code: k
      modifiers:
      - command
    - key_code: japanese_eisuu
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.linear$"

# ──── Google Chrome ────

# [Chrome] スプレッドシートでの検索・置換
- description: "[Chrome] LShift-LCommand-F → Shift-Command-H"
  manipulators:
  - type: basic
    from:
      key_code: f
      modifiers:
        mandatory:
        - left_shift
        - left_command
    to:
    - key_code: h
      modifiers:
      - shift
      - command
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.google\\.Chrome$"

# [Chrome] LCommand-W のリピートを無効化
- description: "[Chrome] LCommand-W → Repeat: False"
  manipulators:
  - type: basic
    from:
      key_code: w
      modifiers:
        mandatory:
        - left_command
    to:
    - key_code: w
      modifiers:
      - command
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.google\\.Chrome$"

# ──── Sidekick ────

# [Sidekick] スプレッドシートでの検索・置換
- description: "[Sidekick] LShift-LCommand-F → Shift-Command-H"
  manipulators:
  - type: basic
    from:
      key_code: f
      modifiers:
        mandatory:
        - left_shift
        - left_command
    to:
    - key_code: h
      modifiers:
      - shift
      - command
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.pushplaylabs\\.sidekick$"

# [Sidekick] LCommand-W のリピートを無効化
- description: "[Sidekick] LCommand-W → Repeat: False"
  manipulators:
  - type: basic
    from:
      key_code: w
      modifiers:
        mandatory:
        - left_command
    to:
    - key_code: w
      modifiers:
      - command
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.pushplaylabs\\.sidekick$"

# [Sidekick] LShift-LCommand-A でセッション一覧を開く（Sidekick でショートカット変更した上で）
- description: "[Sidekick] LShift-LCommand-A → Command-S"
  manipulators:
  - type: basic
    from:
      key_code: a
      modifiers:
        mandatory:
        - left_shift
        - left_command
    to:
    - key_code: s
      modifiers:
      - command
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.pushplaylabs\\.sidekick$"

# [Sidekick] LShift-LCommand-S で Sidecar を開く
- description: "[Sidekick] LShift-LCommand-S → Shift-Option-S"
  manipulators:
  - type: basic
    from:
      key_code: s
      modifiers:
        mandatory:
        - left_shift
        - left_command
    to:
    - key_code: s
      modifiers:
      - shift
      - option
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.pushplaylabs\\.sidekick$"

# ──── Bike ────

- description: "[Bike] Outliner Commands"
  manipulators:

  # [Bike] Control-Right → Indent Row
  - type: basic
    from:
      key_code: right_arrow
      modifiers:
        mandatory:
        - control
    to:
    - key_code: right_arrow
      modifiers:
      - command
      - control
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.hogbaysoftware\\.Bike$"

  # [Bike] Control-Left → Unindent Row
  - type: basic
    from:
      key_code: left_arrow
      modifiers:
        mandatory:
        - control
    to:
    - key_code: left_arrow
      modifiers:
      - command
      - control
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.hogbaysoftware\\.Bike$"

  # [Bike] Control-Up → Move Row Up
  - type: basic
    from:
      key_code: up_arrow
      modifiers:
        mandatory:
        - control
    to:
    - key_code: up_arrow
      modifiers:
      - command
      - control
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.hogbaysoftware\\.Bike$"

  # [Bike] Control-Down → Move Row Down
  - type: basic
    from:
      key_code: down_arrow
      modifiers:
        mandatory:
        - control
    to:
    - key_code: down_arrow
      modifiers:
      - command
      - control
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.hogbaysoftware\\.Bike$"

  # [Bike] Control-LCommand-L → Indent Row
  - type: basic
    from:
      key_code: l
      modifiers:
        mandatory:
        - control
        - left_command
    to:
    - key_code: right_arrow
      modifiers:
      - command
      - control
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.hogbaysoftware\\.Bike$"

  # [Bike] Control-LCommand-H → Unindent Row
  - type: basic
    from:
      key_code: h
      modifiers:
        mandatory:
        - control
        - left_command
    to:
    - key_code: left_arrow
      modifiers:
      - command
      - control
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.hogbaysoftware\\.Bike$"

  # [Bike] Control-LCommand-K → Move Row Up
  - type: basic
    from:
      key_code: k
      modifiers:
        mandatory:
        - control
        - left_command
    to:
    - key_code: up_arrow
      modifiers:
      - command
      - control
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.hogbaysoftware\\.Bike$"

  # [Bike] Control-LCommand-J → Move Row Down
  - type: basic
    from:
      key_code: j
      modifiers:
        mandatory:
        - control
        - command
    to:
    - key_code: down_arrow
      modifiers:
      - command
      - control
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.hogbaysoftware\\.Bike$"

  # [Bike] Option-Right → Focus In
  - type: basic
    from:
      key_code: right_arrow
      modifiers:
        mandatory:
        - option
    to:
    - key_code: right_arrow
      modifiers:
      - command
      - option
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.hogbaysoftware\\.Bike$"

  # [Bike] Option-Left → Focus Out
  - type: basic
    from:
      key_code: left_arrow
      modifiers:
        mandatory:
        - option
    to:
    - key_code: left_arrow
      modifiers:
      - command
      - option
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.hogbaysoftware\\.Bike$"

  # [Bike] Option-LCommand-L → Focus In
  - type: basic
    from:
      key_code: l
      modifiers:
        mandatory:
        - option
        - left_command
    to:
    - key_code: right_arrow
      modifiers:
      - command
      - option
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.hogbaysoftware\\.Bike$"

  # [Bike] Option-LCommand-H → Focus Out
  - type: basic
    from:
      key_code: h
      modifiers:
        mandatory:
        - option
        - left_command
    to:
    - key_code: left_arrow
      modifiers:
      - command
      - option
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.hogbaysoftware\\.Bike$"

  # [Bike] LCommand-Period → Focus In
  - type: basic
    from:
      key_code: period
      modifiers:
        mandatory:
        - left_command
    to:
    - key_code: right_arrow
      modifiers:
      - command
      - option
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.hogbaysoftware\\.Bike$"

  # [Bike] LCommand-Comma → Focus Out
  - type: basic
    from:
      key_code: comma
      modifiers:
        mandatory:
        - left_command
    to:
    - key_code: left_arrow
      modifiers:
      - command
      - option
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.hogbaysoftware\\.Bike$"

  # [Bike] Command-O → Expand Row
  - type: basic
    from:
      key_code: o
      modifiers:
        mandatory:
        - left_command
    to:
    - key_code: "0"
      modifiers:
      - command
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.hogbaysoftware\\.Bike$"

  # [Bike] Command-I → Collapse Row
  - type: basic
    from:
      key_code: i
      modifiers:
        mandatory:
        - left_command
    to:
    - key_code: "9"
      modifiers:
      - command
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.hogbaysoftware\\.Bike$"

  # [Bike] Control-Command-O → Expand All Rows
  - type: basic
    from:
      key_code: o
      modifiers:
        mandatory:
        - control
        - left_command
    to:
    - key_code: "0"
      modifiers:
      - control
      - command
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.hogbaysoftware\\.Bike$"

  # [Bike] Control-Command-I → Collapse All Rows
  - type: basic
    from:
      key_code: i
      modifiers:
        mandatory:
        - control
        - left_command
    to:
    - key_code: "9"
      modifiers:
      - control
      - command
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.hogbaysoftware\\.Bike$"

# ──── WorkFlowy ────

- description: "[WorkFlowy] Outliner Commands"
  manipulators:

  # [WorkFlowy] Control-Right → Indent
  - type: basic
    from:
      key_code: right_arrow
      modifiers:
        mandatory:
        - control
    to:
    - key_code: tab
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.workflowy\\.desktop$"

  # [WorkFlowy] Control-Left → Outdent
  - type: basic
    from:
      key_code: left_arrow
      modifiers:
        mandatory:
        - control
    to:
    - key_code: tab
      modifiers:
      - shift
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.workflowy\\.desktop$"

  # [WorkFlowy] Control-LCommand-L → Indent
  - type: basic
    from:
      key_code: l
      modifiers:
        mandatory:
        - control
        - left_command
    to:
    - key_code: tab
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.workflowy\\.desktop$"

  # [WorkFlowy] Control-LCommand-H → Outdent
  - type: basic
    from:
      key_code: h
      modifiers:
        mandatory:
        - control
        - left_command
    to:
    - key_code: tab
      modifiers:
      - shift
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.workflowy\\.desktop$"

  # [WorkFlowy] Control-Up → Move Up
  - type: basic
    from:
      key_code: up_arrow
      modifiers:
        mandatory:
        - control
    to:
    - key_code: up_arrow
      modifiers:
      - shift
      - command
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.workflowy\\.desktop$"

  # [WorkFlowy] Control-Down → Move Down
  - type: basic
    from:
      key_code: down_arrow
      modifiers:
        mandatory:
        - control
    to:
    - key_code: down_arrow
      modifiers:
      - shift
      - command
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.workflowy\\.desktop$"

  # [WorkFlowy] Control-LCommand-K → Move Up
  - type: basic
    from:
      key_code: k
      modifiers:
        mandatory:
        - control
        - left_command
    to:
    - key_code: up_arrow
      modifiers:
      - shift
      - command
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.workflowy\\.desktop$"

  # [WorkFlowy] Control-LCommand-J → Move Down
  - type: basic
    from:
      key_code: j
      modifiers:
        mandatory:
        - control
        - left_command
    to:
    - key_code: down_arrow
      modifiers:
      - shift
      - command
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.workflowy\\.desktop$"

  # [WorkFlowy] Command-O → Expand
  - type: basic
    from:
      key_code: o
      modifiers:
        mandatory:
        - left_command
    to:
    - key_code: down_arrow
      modifiers:
      - command
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.workflowy\\.desktop$"

  # [WorkFlowy] Command-I → Collapse
  - type: basic
    from:
      key_code: i
      modifiers:
        mandatory:
        - left_command
    to:
    - key_code: up_arrow
      modifiers:
      - command
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.workflowy\\.desktop$"

  # [WorkFlowy] RControl-I → Delete
  - type: basic
    from:
      key_code: h
      modifiers:
        mandatory:
        - right_control
    to:
    - key_code: delete_or_backspace
      repeat: true
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.workflowy\\.desktop$"

# ──── Microsoft Office ────

- description: "[Microsoft Office] Unix Keymaps"
  manipulators:

  # [Word] Control-H → Delete
  - type: basic
    from:
      key_code: h
      modifiers:
        mandatory:
        - control
    to:
    - key_code: delete_or_backspace
      repeat: true
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Word$"

  # [Excel] Control-H → Delete
  - type: basic
    from:
      key_code: h
      modifiers:
        mandatory:
        - control
    to:
    - key_code: delete_or_backspace
      repeat: true
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Excel$"

  # [Powerpoint] Control-H → Delete
  - type: basic
    from:
      key_code: h
      modifiers:
        mandatory:
        - control
    to:
    - key_code: delete_or_backspace
      repeat: true
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Powerpoint$"

  # [Word] Control-D → Fn-Delete
  - type: basic
    from:
      key_code: d
      modifiers:
        mandatory:
        - control
    to:
    - key_code: delete_forward
      repeat: true
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Word$"

  # [Excel] Control-D → Fn-Delete
  - type: basic
    from:
      key_code: d
      modifiers:
        mandatory:
        - control
    to:
    - key_code: delete_forward
      repeat: true
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Excel$"

  # [Powerpoint] Control-D → Fn-Delete
  - type: basic
    from:
      key_code: d
      modifiers:
        mandatory:
        - control
    to:
    - key_code: delete_forward
      repeat: true
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Powerpoint$"

  # [Word] Control-A → 行頭へ移動
  - type: basic
    from:
      key_code: a
      modifiers:
        mandatory:
        - control
    to:
    - key_code: home
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Word$"

  # [Excel] Control-A → 行頭へ移動
  - type: basic
    from:
      key_code: a
      modifiers:
        mandatory:
        - control
    to:
    - key_code: home
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Excel$"

  # [Powerpoint] Control-A → 行頭へ移動
  - type: basic
    from:
      key_code: a
      modifiers:
        mandatory:
        - control
    to:
    - key_code: home
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Powerpoint$"

  # [Word] Control-E → 行末へ移動
  - type: basic
    from:
      key_code: e
      modifiers:
        mandatory:
        - control
    to:
    - key_code: end
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Word$"

  # [Excel] Control-E → 行末へ移動
  - type: basic
    from:
      key_code: e
      modifiers:
        mandatory:
        - control
    to:
    - key_code: end
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Excel$"

  # [Powerpoint] Control-E → 行末へ移動
  - type: basic
    from:
      key_code: e
      modifiers:
        mandatory:
        - control
    to:
    - key_code: end
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Powerpoint$"

  # [Word] Control-K → 行末まで削除
  - type: basic
    from:
      key_code: k
      modifiers:
        mandatory:
        - control
    to:
    - key_code: end
      modifiers:
      - shift
      repeat: false
    - key_code: delete_or_backspace
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Word$"

  # [Excel] Control-K → 行末まで削除
  - type: basic
    from:
      key_code: k
      modifiers:
        mandatory:
        - control
    to:
    - key_code: end
      modifiers:
      - shift
      repeat: false
    - key_code: delete_or_backspace
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Excel$"

  # [Powerpoint] Control-K → 行末まで削除
  - type: basic
    from:
      key_code: k
      modifiers:
        mandatory:
        - control
    to:
    - key_code: end
      modifiers:
      - shift
      repeat: false
    - key_code: delete_or_backspace
      repeat: false
    conditions:
    - type: frontmost_application_if
      bundle_identifiers:
      - "^com\\.microsoft\\.Powerpoint$"
